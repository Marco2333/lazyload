(function(a,d){var c=(function(){function e(){}e.prototype={bind:function(f,g){return function(){return f.apply(g,arguments)}},extend:function(h,i){var f,g;for(f in h){if((g=h[f])!=null){i[f]=g}}return i},throttle:function(i){var f=i,g;if(typeof f==="boolean"){g=arguments[1];g.__throttleID&&clearTimeout(g.__throttleID)}else{g=f;param=arguments[1];var h=this.extend({context:null,args:[],time:100},param);arguments.callee(true,g);g.__throttleID=setTimeout(function(){g.apply(h.context,h.args)},h.time)}},addEvent:function(h,f,g){if(h.addEventListener){this.addEvent=function(k,i,j){k.addEventListener(i,j,false)}}else{if(h.attachEvent){this.addEvent=function(k,i,j){el.attachEvent("on"+i,j)}}else{this.addEvent=function(k,i,j){k["on"+i]=j}}}this.addEvent(h,f,g)},getEleByClass:function(n,g,p){if(g==null){g=document}if(p==null){p="*"}var l,k,o=new Array(),m=new RegExp("(^|\\s)"+n+"(\\s|$)"),h=g.getElementsByTagName(p),f=h.length;for(l=0,k=0;l<f;l++){if(m.test(h[l].className)){o[k++]=h[l]}}return o}};return e})();function b(f,g){var e;if(f==null){f={}}else{if(Object.prototype.toString.call(f)==="[object Function]"){g=f;f={}}}e=this.config=this.util().extend(f,this.defaults);this.container=document.getElementById(e.container);this.errFn=g;this.init()}b.prototype={defaults:{container:"lazyload",srcAttr:"data-src",eleClass:""},init:function(){this.imgs=this.getImages();if(this.errFn){var h,e,j,f=this.util(),j=this.imgs,g=this.errFn;for(h=0,e=j.length;h<e;h++){f.addEvent(j[h],"error",f.bind(g,j[h]))}}this.update();this.bindEvent()},getImages:function(){var j,f=[],e,g=this.container,h=this.config.eleClass.trim(),k=h?g.getElementsByClassName?g.getElementsByClassName(h):this.util().getEleByClass(h,g):g.getElementsByTagName("img");for(j=0,e=k.length;j<e;j++){f.push(k[j])}return f},update:function(){if(!this.imgs.length){return}var f=this.imgs.length,g=this.imgs,e=this.config.srcAttr;for(--f;f>=0;f--){if(this.shouldShow(f)){g[f].src=g[f].getAttribute(e);g.splice(f,1)}}},shouldShow:function(h){var f=this.imgs[h],k=document.documentElement.scrollTop||document.body.scrollTop,j=document.documentElement.clientHeight+k,g=this.pageY(f),e=g+f.offsetHeight;if(e>k&&e<j||(g>k&&g<j)){return true}return false},pageY:function(e){if(e.offsetParent){return e.offsetTop+this.pageY(e.offsetParent)}else{return e.offsetTop}},on:function(g,f,e){if(g.addEventListener){addEventListener(f,e,false)}else{g.attachEvent("on"+f,e,false)}},bindEvent:function(){var f=this,e=this.util();e.addEvent(a,"resize",function(){e.throttle(f.update,{context:f})});e.addEvent(a,"scroll",function(){e.throttle(f.update,{context:f})})},util:function(){return this._util||(this._util=new c())}};a.LazyLoad=b})(window);